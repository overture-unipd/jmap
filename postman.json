{
	"info": {
		"_postman_id": "c3499008-cd18-49af-a325-d44e1c9697cb",
		"name": "JMAP",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "33774471"
	},
	"item": [
		{
			"name": "Mailbox/get",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"La risposta è in formato JSON\", function() {",
							"    pm.response.to.be.json;",
							"});",
							"",
							"pm.test(\"La risposta ha la struttura corretta rispetto alla richiesta\", function() {",
							"    var responseBody = pm.response.json();",
							"",
							"    pm.expect(responseBody.methodResponses[0][1]).to.exist;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].name).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].name).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].sortOrder).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].sortOrder).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].totalEmails).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].totalEmails).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].unreadEmails).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].unreadEmails).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].totalThreads).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].totalThreads).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].unreadThreads).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].unreadThreads).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].id).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].id).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].state).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].state).to.not.be.null;",
							"",
							"    pm.expect(responseBody.sessionState).to.exist;",
							"    pm.expect(responseBody.sessionState).to.not.be.null;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"methodCalls\":[[\"Mailbox/get\",{\"accountId\":\"39d8eb42-df6a-4d72-b47f-a1118fd00522\"},\"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:mail\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Mailbox/get",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"methodCalls\": [\n        [\n            \"Mailbox/get\",\n            {\n                \"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\"\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:mail\"\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 18:07:44 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Mailbox/get\",\n            {\n                \"state\": \"0\",\n                \"list\": [\n                    {\n                        \"name\": \"Inbox\",\n                        \"role\": \"inbox\",\n                        \"totalEmails\": 10,\n                        \"unreadEmails\": 10,\n                        \"totalThreads\": 4,\n                        \"unreadThreads\": 4,\n                        \"id\": \"c345e5ca-58dc-4e4a-843d-2901a5085386\"\n                    }\n                ]\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"0\"\n}"
				}
			]
		},
		{
			"name": "Thread/get",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"La risposta è in formato JSON\", function() {",
							"    pm.response.to.be.json;",
							"});",
							"",
							"pm.test(\"La risposta ha la struttura corretta rispetto alla richiesta\", function() {",
							"    var responseBody = pm.response.json();",
							"",
							"    pm.expect(responseBody.methodResponses[0][1]).to.exist;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].state).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].state).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list).to.be.an('array');",
							"    pm.expect(responseBody.methodResponses[0][1].list).to.have.lengthOf(1);",
							"",
							"    var thread = responseBody.methodResponses[0][1].list[0];",
							"",
							"    pm.expect(thread.emailIds).to.be.an('array');",
							"    pm.expect(thread.emailIds).to.not.be.empty;",
							"",
							"    pm.expect(thread.id).to.exist;",
							"    pm.expect(thread.id).to.not.be.null;",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"methodCalls\":[[\"Thread/get\", {\"accountId\": \"39d8eb42-df6a-4d72-b47f-a1118fd00522\", \"ids\": [\"T3\"]}, \"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:mail\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Thread/get",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[\"Thread/get\", {\"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\", \"ids\": [\"T3\"]}, \"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:mail\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 20:03:07 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Thread/get\",\n            {\n                \"state\": \"0\",\n                \"list\": [\n                    {\n                        \"emailIds\": [\n                            \"M1906504927\",\n                            \"M1906504928\",\n                            \"M1906504929\",\n                            \"M1906504930\"\n                        ],\n                        \"id\": \"T3\"\n                    }\n                ]\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"0\"\n}"
				}
			]
		},
		{
			"name": "Email/get",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"La risposta è in formato JSON\", function() {",
							"    pm.response.to.be.json;",
							"});",
							"",
							"pm.test(\"La risposta ha la struttura corretta rispetto alla richiesta\", function() {",
							"    var responseBody = pm.response.json();",
							"",
							"    pm.expect(responseBody.methodResponses[0][1]).to.exist;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].state).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].state).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list).to.be.an('array');",
							"    pm.expect(responseBody.methodResponses[0][1].list).to.have.lengthOf(1);",
							"",
							"    var email = responseBody.methodResponses[0][1].list[0];",
							"",
							"    pm.expect(email.threadId).to.exist;",
							"    pm.expect(email.threadId).to.not.be.null;",
							"",
							"    pm.expect(email.mailboxIds).to.be.an('object');",
							"    pm.expect(email.mailboxIds).to.not.be.empty;",
							"",
							"    pm.expect(email.receivedAt).to.exist;",
							"    pm.expect(email.receivedAt).to.not.be.null;",
							"",
							"    pm.expect(email.from).to.be.an('array');",
							"    pm.expect(email.from).to.not.be.empty;",
							"",
							"    pm.expect(email.to).to.be.an('array');",
							"    pm.expect(email.to).to.not.be.empty;",
							"",
							"    pm.expect(email.subject).to.exist;",
							"    pm.expect(email.subject).to.not.be.null;",
							"",
							"    pm.expect(email.sentAt).to.exist;",
							"    pm.expect(email.sentAt).to.not.be.null;",
							"",
							"    pm.expect(email.bodyStructure).to.be.an('object');",
							"    pm.expect(email.bodyStructure).to.not.be.null;",
							"",
							"    pm.expect(email.bodyValues).to.be.an('object');",
							"    pm.expect(email.bodyValues).to.not.be.empty;",
							"",
							"    pm.expect(email.textBody).to.be.an('array');",
							"    pm.expect(email.textBody).to.not.be.empty;",
							"",
							"    pm.expect(email.preview).to.exist;",
							"    pm.expect(email.preview).to.not.be.null;",
							"",
							"    pm.expect(email.id).to.exist;",
							"    pm.expect(email.id).to.not.be.null;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"methodCalls\":[[\"Email/get\", {\"accountId\": \"39d8eb42-df6a-4d72-b47f-a1118fd00522\", \"ids\": [\"M1906504930\"]}, \"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:mail\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Email/get",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[\"Email/get\", {\n        \"ids\": [ \"M1906504930\"]}, \"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:mail\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 19:45:38 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Email/get\",\n            {\n                \"state\": \"0\",\n                \"list\": [\n                    {\n                        \"threadId\": \"T3\",\n                        \"mailboxIds\": {\n                            \"c345e5ca-58dc-4e4a-843d-2901a5085386\": true\n                        },\n                        \"receivedAt\": \"2020-11-16T18:33:20Z\",\n                        \"from\": [\n                            {\n                                \"name\": \"Sharon Johnson\",\n                                \"email\": \"sharon.johnson@localhost\"\n                            }\n                        ],\n                        \"to\": [\n                            {\n                                \"name\": \"Steven King\",\n                                \"email\": \"steven.king@localhost\"\n                            },\n                            {\n                                \"name\": \"Ruth Wright\",\n                                \"email\": \"ruth.wright@localhost\"\n                            },\n                            {\n                                \"name\": \"Edward Smith\",\n                                \"email\": \"edward.smith@localhost\"\n                            },\n                            {\n                                \"name\": \"alice\",\n                                \"email\": \"alice@jmaptest.duckdns.org\"\n                            }\n                        ],\n                        \"subject\": \"Re: Aliquam luctus a elit\",\n                        \"sentAt\": \"2020-11-16T19:33:20+01:00\",\n                        \"bodyStructure\": {\n                            \"partId\": \"0\",\n                            \"type\": \"text/plain\"\n                        },\n                        \"bodyValues\": {\n                            \"0\": {\n                                \"value\": \"Vestibulum imperdiet tortor est, nec aliquam ligula volutpat at. Cras et malesuada sapien. Suspendisse sit amet luctus risus, in ultrices urna. Curabitur et maximus ante. Integer sit amet nulla turpis. Nulla pharetra felis et sem tempus laoreet. Suspendisse et facilisis quam, sed bibendum enim.\"\n                            }\n                        },\n                        \"textBody\": [\n                            {\n                                \"partId\": \"0\",\n                                \"type\": \"text/plain\"\n                            }\n                        ],\n                        \"preview\": \"Vestibulum imperdiet tortor est, nec aliquam ligula volutpat at. Cras et malesuada sapien. Suspendisse sit amet luctus risus, in ultrices urna. Curabitur et maximus ante. Integer sit amet nulla turpis. Nulla pharetra felis et sem tempus laoreet. Suspendiss\",\n                        \"id\": \"M1906504930\"\n                    }\n                ]\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"0\"\n}"
				}
			]
		},
		{
			"name": "Identity/get",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"La risposta è in formato JSON\", function() {",
							"    pm.response.to.be.json;",
							"});",
							"",
							"pm.test(\"La risposta ha la struttura corretta rispetto alla richiesta\", function() {",
							"    var responseBody = pm.response.json();",
							"",
							"    pm.expect(responseBody.methodResponses[0][1]).to.exist;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].name).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].name).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].email).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].email).to.not.be.null;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].id).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].list[0].id).to.not.be.null;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"methodCalls\": [\n        [\n            \"Identity/get\",\n            {\n                \"accountId\": \"39d8eb42-df6a-4d72-b47f-a1118fd00522\"\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:submission\"\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Identity/get",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"methodCalls\": [\n        [\n            \"Identity/get\",\n            {\n                \"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\"\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:submission\"\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 18:02:58 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Identity/get\",\n            {\n                \"list\": [\n                    {\n                        \"name\": \"alice\",\n                        \"email\": \"alice@jmaptest.duckdns.org\",\n                        \"id\": \"a031bccb-ca23-423b-9615-d2c7917d378e\"\n                    }\n                ]\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"0\"\n}"
				}
			]
		},
		{
			"name": "Mailbox/set",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"La risposta è in formato JSON\", function() {",
							"    pm.response.to.be.json;",
							"});",
							"",
							"pm.test(\"La risposta ha la struttura corretta rispetto alla richiesta\", function() {",
							"    var responseBody = pm.response.json();",
							"",
							"    pm.expect(responseBody.methodResponses[0][1]).to.exist;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].created).to.be.an('object');",
							"    pm.expect(responseBody.methodResponses[0][1].created).to.not.be.empty;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].created.test).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].created.test).to.not.be.null;",
							"    pm.expect(responseBody.methodResponses[0][1].created.test).to.be.an('object');",
							"",
							"    var testMailbox = responseBody.methodResponses[0][1].created.test;",
							"",
							"    pm.expect(testMailbox.name).to.exist;",
							"    pm.expect(testMailbox.name).to.not.be.null;",
							"",
							"    pm.expect(testMailbox.totalEmails).to.exist;",
							"    pm.expect(testMailbox.totalEmails).to.not.be.null;",
							"",
							"    pm.expect(testMailbox.unreadEmails).to.exist;",
							"    pm.expect(testMailbox.unreadEmails).to.not.be.null;",
							"",
							"    pm.expect(testMailbox.totalThreads).to.exist;",
							"    pm.expect(testMailbox.totalThreads).to.not.be.null;",
							"",
							"    pm.expect(testMailbox.unreadThreads).to.exist;",
							"    pm.expect(testMailbox.unreadThreads).to.not.be.null;",
							"",
							"    pm.expect(testMailbox.id).to.exist;",
							"    pm.expect(testMailbox.id).to.not.be.null;",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"methodCalls\":[[\"Mailbox/set\",{\"accountId\":\"5297edcc-62ce-4c0e-8e0f-9216e48b4881\",\"create\":{\"test\":{\"name\":\"test\",\"role\":\"test\"}}},\"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Mailbox/set",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[\"Mailbox/set\",{\"accountId\":\"a031bccb-ca23-423b-9615-d2c7917d378e\",\"create\":{\"test\":{\"name\":\"test\",\"role\":\"test\"}}},\"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 20:28:34 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Mailbox/set\",\n            {\n                \"created\": {\n                    \"test\": {\n                        \"name\": \"test\",\n                        \"totalEmails\": 0,\n                        \"unreadEmails\": 0,\n                        \"totalThreads\": 0,\n                        \"unreadThreads\": 0,\n                        \"id\": \"67072fbf-3573-417b-b183-09590c48a905\"\n                    }\n                },\n                \"updated\": {},\n                \"notCreated\": {},\n                \"notUpdated\": {}\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"11\"\n}"
				}
			]
		},
		{
			"name": "Email/set",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"La risposta è in formato JSON\", function() {",
							"    pm.response.to.be.json;",
							"});",
							"",
							"pm.test(\"La risposta ha la struttura corretta rispetto alla richiesta\", function() {",
							"    var responseBody = pm.response.json();",
							"",
							"    pm.expect(responseBody.methodResponses[0][1]).to.exist;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].updated).to.be.an('object');",
							"    pm.expect(responseBody.methodResponses[0][1].updated).to.not.be.empty;",
							"",
							"    pm.expect(responseBody.methodResponses[0][1].updated.M1958775338).to.exist;",
							"    pm.expect(responseBody.methodResponses[0][1].updated.M1958775338).to.not.be.null;",
							"    pm.expect(responseBody.methodResponses[0][1].updated.M1958775338).to.be.an('object');",
							"",
							"    var updatedEmail = responseBody.methodResponses[0][1].updated.M1958775338;",
							"",
							"    pm.expect(updatedEmail.threadId).to.exist;",
							"    pm.expect(updatedEmail.threadId).to.not.be.null;",
							"",
							"    pm.expect(updatedEmail.mailboxIds).to.be.an('object');",
							"    pm.expect(updatedEmail.mailboxIds).to.not.be.empty;",
							"",
							"    pm.expect(updatedEmail.keywords).to.be.an('object');",
							"    pm.expect(updatedEmail.keywords).to.not.be.empty;",
							"",
							"    pm.expect(updatedEmail.receivedAt).to.exist;",
							"    pm.expect(updatedEmail.receivedAt).to.not.be.null;",
							"",
							"    pm.expect(updatedEmail.from).to.be.an('array');",
							"    pm.expect(updatedEmail.from).to.not.be.empty;",
							"",
							"    pm.expect(updatedEmail.to).to.be.an('array');",
							"    pm.expect(updatedEmail.to).to.not.be.empty;",
							"",
							"    pm.expect(updatedEmail.subject).to.exist;",
							"    pm.expect(updatedEmail.subject).to.not.be.null;",
							"",
							"    pm.expect(updatedEmail.sentAt).to.exist;",
							"    pm.expect(updatedEmail.sentAt).to.not.be.null;",
							"",
							"    pm.expect(updatedEmail.bodyStructure).to.be.an('object');",
							"    pm.expect(updatedEmail.bodyStructure).to.not.be.null;",
							"",
							"    pm.expect(updatedEmail.bodyValues).to.be.an('object');",
							"    pm.expect(updatedEmail.bodyValues).to.not.be.empty;",
							"",
							"    pm.expect(updatedEmail.textBody).to.be.an('array');",
							"    pm.expect(updatedEmail.textBody).to.not.be.empty;",
							"",
							"    pm.expect(updatedEmail.preview).to.exist;",
							"    pm.expect(updatedEmail.preview).to.not.be.null;",
							"",
							"    pm.expect(updatedEmail.id).to.exist;",
							"    pm.expect(updatedEmail.id).to.not.be.null;",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"methodCalls\": [[\"Email/set\", {\"accountId\": \"912bd709-df88-4152-97eb-c13031dc5f13\", \"create\": {\"e0\": {\"header:Autocrypt:asText:all\": [\"addr=dorothy.williams@overture.duckdns.org; prefer-encrypt=nopreference; keydata=mDMEZZsj3hYJKwYBBAHaRw8BAQdAaF0VpmKz23TlC25PZp5fhj1bayW1LbzNvjopA3qiYJu0Jzxkb3JvdGh5LndpbGxpYW1zQG92ZXJ0dXJlLmR1Y2tkbnMub3JnPoiVBBMWCgBHBQJlmyPeCRDPzjFmxcYlvBYhBLg6FjZrpDfdjTSLqM/OMWbFxiW8Ap4BApsDBRYCAwEABAsJCAcFFQoJCAsFiQlmAYACmQEAAPxsAQCROFnwK1p9BOqPLPPGVCwy9vGvRkw6S21446BxyElVHgEA0F+Tr79VmonXeRZCY16b6i9+KxvwoFiNElwmpHEtAgu4OARlmyPeEgorBgEEAZdVAQUBAQdAR0tUF47xHRChiqTnEZTUHO4xjCycSFjp90o6H/IxFAkDAQgHiHUEGBYKAB0FAmWbI94CngECmwwFFgIDAQAECwkIBwUVCgkICwAKCRDPzjFmxcYlvDmPAQDOlk7U7XVX6wxYJ9BKpww+xZLHUJ2JzT3gDe8GiCVtnAD/XEO70JowIc1NWJv5q0L7uV8rJGdgY+EDb05hTWXkfgI=\", \"addr=dorothy.williams@overture.duckdns.org; prefer-encrypt=nopreference; keydata=mDMEZZsj3hYJKwYBBAHaRw8BAQdAaF0VpmKz23TlC25PZp5fhj1bayW1LbzNvjopA3qiYJu0Jzxkb3JvdGh5LndpbGxpYW1zQG92ZXJ0dXJlLmR1Y2tkbnMub3JnPoiVBBMWCgBHBQJlmyPeCRDPzjFmxcYlvBYhBLg6FjZrpDfdjTSLqM/OMWbFxiW8Ap4BApsDBRYCAwEABAsJCAcFFQoJCAsFiQlmAYACmQEAAPxsAQCROFnwK1p9BOqPLPPGVCwy9vGvRkw6S21446BxyElVHgEA0F+Tr79VmonXeRZCY16b6i9+KxvwoFiNElwmpHEtAgu4OARlmyPeEgorBgEEAZdVAQUBAQdAR0tUF47xHRChiqTnEZTUHO4xjCycSFjp90o6H/IxFAkDAQgHiHUEGBYKAB0FAmWbI94CngECmwwFFgIDAQAECwkIBwUVCgkICwAKCRDPzjFmxcYlvDmPAQDOlk7U7XVX6wxYJ9BKpww+xZLHUJ2JzT3gDe8GiCVtnAD/XEO70JowIc1NWJv5q0L7uV8rJGdgY+EDb05hTWXkfgI=\"], \"bodyValues\": {\"0\": {\"value\": \"prova 123\"}}, \"from\": [{\"email\": \"dorothy.williams@overture.duckdns.org\", \"name\": \"Dorothy Williams\"}], \"keywords\": {\"$draft\": true, \"$seen\": true}, \"mailboxIds\": {\"#mb-drafts\": true}, \"subject\": \"titolo\", \"textBody\": [{\"partId\": \"0\", \"type\": \"text/plain\"}], \"to\": [{\"email\": \"dorothy.williams@overture.duckdns.org\"}], \"header:User-Agent:asText\": \"Ltt.rs/0.4.2\"}}}, \"0\"]], \"using\": [\"urn:ietf:params:jmap:core\", \"urn:ietf:params:jmap:mail\", \"urn:ietf:params:jmap:submission\"]}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Email/set",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[\"Email/set\",{\"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\"update\": {\"M1906504930\": {\"keywords/$seen\": null}}},\"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 20:44:13 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Email/set\",\n            {\n                \"created\": {},\n                \"updated\": {\n                    \"M1906504930\": {\n                        \"threadId\": \"T3\",\n                        \"mailboxIds\": {\n                            \"c345e5ca-58dc-4e4a-843d-2901a5085386\": true\n                        },\n                        \"keywords\": {\n                            \"placeholder\": true\n                        },\n                        \"receivedAt\": \"2020-11-16T18:33:20Z\",\n                        \"from\": [\n                            {\n                                \"name\": \"Sharon Johnson\",\n                                \"email\": \"sharon.johnson@localhost\"\n                            }\n                        ],\n                        \"to\": [\n                            {\n                                \"name\": \"Steven King\",\n                                \"email\": \"steven.king@localhost\"\n                            },\n                            {\n                                \"name\": \"Ruth Wright\",\n                                \"email\": \"ruth.wright@localhost\"\n                            },\n                            {\n                                \"name\": \"Edward Smith\",\n                                \"email\": \"edward.smith@localhost\"\n                            },\n                            {\n                                \"name\": \"alice\",\n                                \"email\": \"alice@jmaptest.duckdns.org\"\n                            }\n                        ],\n                        \"subject\": \"Re: Aliquam luctus a elit\",\n                        \"sentAt\": \"2020-11-16T19:33:20+01:00\",\n                        \"bodyStructure\": {\n                            \"partId\": \"0\",\n                            \"type\": \"text/plain\"\n                        },\n                        \"bodyValues\": {\n                            \"0\": {\n                                \"value\": \"Vestibulum imperdiet tortor est, nec aliquam ligula volutpat at. Cras et malesuada sapien. Suspendisse sit amet luctus risus, in ultrices urna. Curabitur et maximus ante. Integer sit amet nulla turpis. Nulla pharetra felis et sem tempus laoreet. Suspendisse et facilisis quam, sed bibendum enim.\"\n                            }\n                        },\n                        \"textBody\": [\n                            {\n                                \"partId\": \"0\",\n                                \"type\": \"text/plain\"\n                            }\n                        ],\n                        \"preview\": \"Vestibulum imperdiet tortor est, nec aliquam ligula volutpat at. Cras et malesuada sapien. Suspendisse sit amet luctus risus, in ultrices urna. Curabitur et maximus ante. Integer sit amet nulla turpis. Nulla pharetra felis et sem tempus laoreet. Suspendiss\",\n                        \"id\": \"M1906504930\"\n                    }\n                },\n                \"notCreated\": {},\n                \"notUpdated\": {},\n                \"notDestroyed\": {}\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"12\"\n}"
				}
			]
		},
		{
			"name": "Email/query",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "al",
							"type": "string"
						},
						{
							"key": "username",
							"value": "alice@jmaptest.duckdns.org",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"methodCalls\": [\n        [\n            \"Email/query\",\n            {\n                \"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\n                \"filter\": {\n                    \"inMailbox\": \"44d96efb-8f1f-43b0-9931-92eeee65984d\"\n                },\n                \"sort\": [\n                    {\n                        \"isAscending\": false,\n                        \"property\": \"receivedAt\"\n                    }\n                ],\n                \"collapseThreads\": true,\n                \"position\": 0,\n                \"limit\": 30,\n                \"calculateTotal\": true\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:submission\"\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Email/query",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[\"Email/query\",{\"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\"filter\": {\"inMailbox\": \"c345e5ca-58dc-4e4a-843d-2901a5085386\"},\"sort\": [{\"isAscending\": false,\"property\": \"receivedAt\"}],\"collapseThreads\": true,\"position\": 0,\"limit\": 30,\"calculateTotal\": true}, \"0\" ]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 21:08:12 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Email/query\",\n            {\n                \"queryState\": \"12\",\n                \"canCalculateChanges\": false,\n                \"position\": 0,\n                \"ids\": [\n                    \"M1906504921\",\n                    \"M1906504923\",\n                    \"M1906504926\",\n                    \"M1906504930\"\n                ],\n                \"total\": 4\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"12\"\n}"
				}
			]
		},
		{
			"name": "Email/changes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "al",
							"type": "string"
						},
						{
							"key": "username",
							"value": "alice@jmaptest.duckdns.org",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"methodCalls\": [\n        [\n            \"Email/changes\",\n            {\n                \"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\n                \"sinceState\": \"0\"\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:submission\"\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Email/changes",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[ \"Email/changes\",{\"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\"sinceState\":\"0\"},\"0\" ]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 21:14:23 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Email/changes\",\n            {\n                \"oldState\": \"0\",\n                \"newState\": \"12\",\n                \"hasMoreChanges\": false,\n                \"created\": [],\n                \"updated\": [\n                    \"M1906504930\"\n                ],\n                \"destroyed\": []\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"12\"\n}"
				}
			]
		},
		{
			"name": "Thread/changes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "al",
							"type": "string"
						},
						{
							"key": "username",
							"value": "alice@jmaptest.duckdns.org",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"methodCalls\": [\n        [\n            \"Thread/changes\",\n            {\n                \"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\n                \"sinceState\": \"0\"\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:submission\"\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Thread/changes",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[\"Thread/changes\",{\"accountId\":\"a031bccb-ca23-423b-9615-d2c7917d378e\",\"sinceState\":\"0\"},\"0\"]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 21:19:07 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Thread/changes\",\n            {\n                \"oldState\": \"0\",\n                \"newState\": \"12\",\n                \"hasMoreChanges\": false,\n                \"created\": [],\n                \"updated\": [],\n                \"destroyed\": []\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"12\"\n}"
				}
			]
		},
		{
			"name": "Mailbox/changes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "al",
							"type": "string"
						},
						{
							"key": "username",
							"value": "alice@jmaptest.duckdns.org",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"methodCalls\": [\n        [\n            \"Mailbox/changes\",\n            {\n                \"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\n                \"sinceState\": \"0\"\n            },\n            \"0\"\n        ]\n    ],\n    \"using\": [\n        \"urn:ietf:params:jmap:core\",\n        \"urn:ietf:params:jmap:submission\"\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "http://localhost:8000/api/jmap",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8000",
					"path": [
						"api",
						"jmap"
					]
				}
			},
			"response": [
				{
					"name": "Mailbox/changes",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\"methodCalls\":[[ \"Mailbox/changes\",{\"accountId\": \"a031bccb-ca23-423b-9615-d2c7917d378e\",\"sinceState\":\"0\"},\"0\" ]],\"using\":[\"urn:ietf:params:jmap:core\",\"urn:ietf:params:jmap:submission\"]}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "http://localhost:8000/api/jmap",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8000",
							"path": [
								"api",
								"jmap"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Date",
							"value": "Sun, 03 Mar 2024 21:21:13 GMT"
						},
						{
							"key": "Content-Type",
							"value": "application/json"
						},
						{
							"key": "Transfer-Encoding",
							"value": "chunked"
						},
						{
							"key": "Server",
							"value": "Jetty(9.4.48.v20220622)"
						}
					],
					"cookie": [],
					"body": "{\n    \"methodResponses\": [\n        [\n            \"Mailbox/changes\",\n            {\n                \"oldState\": \"0\",\n                \"newState\": \"12\",\n                \"hasMoreChanges\": false,\n                \"created\": [\n                    \"cfcdf095-6f3c-4eba-a272-6ba7aa27065a\",\n                    \"67072fbf-3573-417b-b183-09590c48a905\",\n                    \"86312046-ccd8-485e-86dc-3a6c2e39ee94\"\n                ],\n                \"updated\": [\n                    \"c345e5ca-58dc-4e4a-843d-2901a5085386\"\n                ],\n                \"destroyed\": []\n            },\n            \"0\"\n        ]\n    ],\n    \"sessionState\": \"12\"\n}"
				}
			]
		}
	],
	"auth": {
		"type": "basic",
		"basic": [
			{
				"key": "password",
				"value": "al",
				"type": "string"
			},
			{
				"key": "username",
				"value": "alice@jmaptest.duckdns.org",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}
